/* =========================================
   BASE LAYOUT
   ========================================= */
:root {
  /* Provide sensible fallbacks if vars are missing */
  --text: #eaeaea;
  --heading: #fff;

  --screen-bg: rgba(255,255,255,0.04);
  --panel-bg: rgba(255,255,255,0.05);
  --panel-text: #eaeaea;
  --history-bg: rgba(0,0,0,0.25);

  --kb-neutral: #2b2f36;
  --kb-hover: #3a3f48;

  --tile-green: #3aa85a;
  --tile-green-text: #fff;
  --tile-yellow: #d4b23c;
  --tile-yellow-text: #000;
  --tile-gray: #3a3d44;
  --tile-gray-text: #eee;

  --toast-bg: rgba(20,20,22,0.95);
  --toast-border: rgba(255,255,255,0.12);

  --popup-bg: rgba(20,20,22,0.95);
  --popup-border: rgba(255,255,255,0.16);

  /* Theme “role” tokens (overridden by .theme-*) */
  --role-accent: #4da3ff;
  --role-accent-strong: #4da3ff;

  --btn-primary: #4da3ff;
  --btn-primary-hover: #6ab4ff;
  --btn-primary-glow: rgba(70,140,255,.7);
}

body {
  margin: 0;
  padding: 0;
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.45;

  background:
    radial-gradient(circle at top center, rgba(255, 0, 0, 0.08), transparent 60%),
    #0c0c0e;
}

/* =========================================
   LOBBY TYPOGRAPHY
   ========================================= */
/* Low-specificity grouping to avoid clashes */
.screen-lobby :where(input, button, p, label, span),
.screen-lobby {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 18px;
  letter-spacing: 0.5px;
}

.screen-lobby input { font-weight: 600; }

.screen-lobby button {
  font-size: 16px;
  font-weight: 700;
}

#roomInfo {
  opacity: 0;
  transition: opacity .25s ease;
}
#roomInfo:not(.hidden) { opacity: 1; }

#appContainer {
  max-width: 600px;
  margin: auto;
  padding: 20px;
}

.title {
  margin: 6px 0 10px;
  font-size: 20px;
  font-weight: 800;
  letter-spacing: 2px;
  opacity: 0.85;
  text-transform: uppercase;
}

/* =========================================
   INPUT AREA
   ========================================= */
.guess-input-area {
  display: flex;
  flex-direction: column; /* authoritative */
  align-items: center;
  gap: 10px;

  width: 100%;
  max-width: 520px;
  margin: 20px auto 0;
}

.guess-btn-row {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 10px;

  flex: 1;
  min-width: 120px;
}

.play-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.decision-row {
  display: flex;
  gap: 12px;
  width: 100%;
  max-width: 360px;
}
.decision-row button { flex: 1; }

/* Authoritative input style */
.letter-input {
  width: 100%;
  max-width: 360px;

  background: #e6e6e6;
  color: #000;

  border: none;
  border-radius: 8px;
  padding: 10px 12px;

  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: 6px; /* keep only one */
  text-transform: uppercase;
  text-align: center;

  box-shadow: inset 0 0 0 1px #bbb;
}

.letter-input:focus {
  outline: none;
  box-shadow:
    inset 0 0 0 2px var(--btn-primary),
    0 0 8px var(--btn-primary-glow);
}

/* =========================================
   SCREEN PANELS
   ========================================= */
.screen {
  display: none;
  position: relative;

  background: var(--screen-bg);
  border-radius: 14px;
  padding: 20px;
  margin-top: 16px;

  box-shadow:
    0 0 12px rgba(0,0,0,.4),
    0 0 18px rgba(0,0,0,.25) inset;

  opacity: 0;
  transform: translateY(10px);
  transition: .25s ease;
}

.screen.active {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

.screen-title {
  font-size: 24px;
  color: var(--heading);
  margin-bottom: 16px;
}

/* Shared panel styling */
:where(.panel, .constraints-box, .history-box, .summary-box, .preview-box) {
  background: var(--panel-bg);
  color: var(--panel-text);
  border-radius: 10px;
  padding: 14px;
  margin-top: 14px;
  box-shadow: 0 0 6px rgba(0,0,0,.4) inset;
}

.history-box {
  background: var(--history-bg);
  font-family: "Courier New", monospace;
}

/* Empty history message */
.history-box:
