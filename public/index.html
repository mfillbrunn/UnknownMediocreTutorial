<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>VS Wordle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">

  <style>
    /* Switch button active (user pressed switch) */
    .switch-active {
      background-color: #28a745 !important;
      border-color: #1e7e34 !important;
      color: white !important;
    }
  </style>
</head>

<body>

<div id="appContainer">

  <h1 class="title">VS Wordle</h1>

  <!-- TURN POPUP -->
  <div id="turnPopup" class="turn-popup"></div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- ===================================================== -->
  <!-- LOBBY -->
  <!-- ===================================================== -->
  <div id="lobby" class="screen active">
    <h2>Online Lobby</h2>

    <button id="createRoomBtn" class="primary-btn">Create Room</button>

    <div class="join-block">
      <input id="joinRoomInput" type="text" maxlength="8" placeholder="Room code">
      <button id="joinRoomBtn" class="primary-btn small">Join</button>
    </div>

    <div id="roomInfo" style="display:none; margin-top:10px;">

      <p><b>Room:</b> <span id="roomCodeLabel" class="room-code"></span></p>

      <!-- NEW: SHOW YOUR ROLE HERE -->
      <p><b>You are:</b> <span id="lobbyRoleLabel">-</span></p>

      <!-- Switch Roles Button -->
      <button id="switchRolesBtn" class="primary-btn">Switch Roles</button>

      <!-- READY BUTTON -->
      <button id="readyBtn" class="primary-btn disabled">I'm Ready</button>
    </div>

    <p id="lobbyStatus" class="status"></p>
  </div>

  <!-- ===================================================== -->
  <!-- MENU -->
  <!-- ===================================================== -->
  <div id="menu" class="screen">
    <h2>Game Menu</h2>
    <p><b>Room:</b> <span id="menuRoomCode"></span></p>
    <p><b>You are:</b> <span id="menuPlayerRole"></span></p>
    <div id="roundSummary" class="summary-box"></div>
    <button id="newMatchBtn" class="primary-btn">New Match</button>
  </div>

  <!-- ===================================================== -->
  <!-- SETTER SCREEN -->
  <!-- ===================================================== -->
  <div id="setterScreen" class="screen">
    <h2>Setter <span class="badge badge-a">A</span></h2>

    <div class="constraints-box">
      <p><b>Pattern:</b> <span id="knownPatternSetter">- - - - -</span></p>
      <p><b>Must contain:</b> <span id="mustContainSetter">none</span></p>
    </div>

    <p><b>Current Secret:</b> <span id="secretWordDisplay">NONE</span></p>
    <p><b>Latest Guess:</b> <span id="pendingGuessDisplay">-</span></p>
    <h3>Preview Feedback</h3>
    <div id="setterPreview" class="preview-box"></div>

    <hr>
    <div id="turnIndicatorSetter" class="turn-indicator"></div>

    <h3>Enter Secret</h3>
    <input id="newSecretInput" maxlength="5" autocomplete="off" class="letter-input">
    <button id="submitSetterNewBtn" class="primary-btn">Submit NEW Secret</button>
    <button id="submitSetterSameBtn" class="primary-btn">Keep SAME Secret</button>
    <button id="setterBackToMenuBtn" class="secondary-btn small">Back</button>

    <h3>Setter Powers</h3>
    <div id="setterPowerContainer"></div>

    <div id="keyboardSetter" class="keyboard"></div>

    <h3>History</h3>
    <div id="historySetter" class="history-box">No guesses yet.</div>
  </div>

  <!-- ===================================================== -->
  <!-- GUESSER SCREEN -->
  <!-- ===================================================== -->
  <div id="guesserScreen" class="screen">
    <h2>Guesser <span class="badge badge-b">B</span></h2>

    <div class="constraints-box">
      <p><b>Pattern:</b> <span id="knownPatternGuesser">- - - - -</span></p>
      <p><b>Must contain:</b> <span id="mustContainGuesser">none</span></p>
    </div>

    <div id="turnIndicatorGuesser" class="turn-indicator"></div>

    <h3>Make a Guess</h3>
    <input id="guessInput" maxlength="5" autocomplete="off" class="letter-input">
    <button id="submitGuessBtn" class="primary-btn">Submit Guess</button>
    <button id="guesserBackToMenuBtn" class="secondary-btn small">Back</button>

    <h3>Guesser Powers</h3>
    <div id="guesserPowerContainer"></div>

    <div id="keyboardGuesser" class="keyboard"></div>

    <h3>History</h3>
    <div id="historyGuesser" class="history-box">No guesses yet.</div>
  </div>

</div>

<!-- ===================================================== -->
<!-- ===============  SCRIPT LOAD ORDER (CRITICAL) ======== -->
<!-- ===================================================== -->

<script src="/socket.io/socket.io.js"></script>

<script src="game-engine/constraints.js"></script>
<script src="game-engine/scoring.js"></script>
<script src="game-engine/preview.js"></script>

<script src="network/socketClient.js"></script>

<script src="ui/keyboard.js"></script>
<script src="ui/history.js"></script>
<!-- Power Engine Core -->
<script src="powerEngine/powerEngine.js"></script>

<!-- Individual power modules -->
<script src="powerEngine/powers/hideTile.js"></script>
<script src="powerEngine/powers/reuseLetters.js"></script>
<script src="powerEngine/powers/confuseColors.js"></script>
<script src="powerEngine/powers/countOnly.js"></script>
<script src="powerEngine/powers/revealGreen.js"></script>
<script src="powerEngine/powers/freezeSecret.js"></script>

<!-- Main client logic (must be last) -->
<script src="client.js"></script>

<script src="client.js"></script>

<noscript>
  <p style="color:red;">This game requires JavaScript to run.</p>
</noscript>

</body>
</html>
