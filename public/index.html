<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Competitive Wordle â€“ Powers Edition (Multiplayer)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Styles will be replaced in Part 4 -->
  <link rel="stylesheet" href="style.css">

</head>
<body>

<div id="appContainer">

  <h1 class="title">Competitive Wordle â€“ Powers Edition</h1>

  <!-- ========= TURN POPUP (big overlay) ========= -->
  <div id="turnPopup" class="turn-popup"></div>

  <!-- ========= TOAST NOTIFICATION ========= -->
  <div id="toast" class="toast"></div>

  <!-- ========= ANIMATION HOLDERS (flip animations) ========= -->
  <div id="guessAnim" class="flip-holder"></div>
  <div id="feedbackAnim" class="flip-holder"></div>

  <!-- ===================================================== -->
  <!-- LOBBY / CONNECTION -->
  <!-- ===================================================== -->
  <div id="lobby" class="screen active">
    <h2>Online Lobby</h2>
    <p>Play on multiple phones by sharing a room code.</p>

    <button id="createRoomBtn" class="primary-btn">Create Room</button>

    <div class="join-block">
      <input id="joinRoomInput" type="text" maxlength="8" placeholder="Room code">
      <button id="joinRoomBtn" class="primary-btn small">Join</button>
    </div>

    <p id="lobbyStatus" class="status"></p>

    <!-- Role selection (ONLY for joiner) -->
    <div id="rolePicker" class="role-picker"></div>

    <div id="roomInfo" style="display:none; margin-top:10px;">
      <p><b>Room:</b> <span id="roomCodeLabel" class="room-code"></span></p>
      <p><b>You are:</b> <span id="playerRoleLabel"></span></p>
      <button id="enterGameBtn" class="primary-btn">Enter Game</button>
    </div>

    <hr>
    <p class="note">Both players open this page on their phones, one creates a room, shares code, the other joins.</p>
  </div>

  <!-- ===================================================== -->
  <!-- MAIN MENU -->
  <!-- ===================================================== -->
  <div id="menu" class="screen">
    <h2>Game Menu</h2>

    <p><b>Room:</b> <span id="menuRoomCode"></span></p>
    <p><b>You are:</b> <span id="menuPlayerRole"></span></p>

    <p><b>Round:</b> <span id="roundLabel">1</span> / 2</p>
    <p><b>Setup:</b> <span id="roleLabel"></span></p>
    <p><b>Turn:</b> <span id="turnLabel"></span></p>

    <button id="btnSetter" class="turn-button">Setter Screen <span id="setterWho"></span></button>
    <button id="btnGuesser" class="turn-button">Guesser Screen <span id="guesserWho"></span></button>

    <p><b>Guesses so far:</b> <span id="guessCountMenu">0</span></p>

    <div id="roundSummary" class="summary-box"></div>

    <button id="newMatchBtn" class="primary-btn">New Match</button>
    <button id="backToLobbyBtn" class="secondary-btn">Back to Lobby</button>
  </div>

  <!-- ===================================================== -->
  <!-- SETTER SCREEN -->
  <!-- ===================================================== -->
  <div id="setterScreen" class="screen">
    <h2>Setter <span id="setterRoleTag" class="badge badge-a">A</span></h2>
    <p>You see full feedback. The guesser sees hidden tiles.</p>

    <!-- hypothetical feedback preview -->
    <div id="hypotheticalBox" class="box hypo-box"></div>

    <!-- constraints -->
    <div class="constraints-box">
      <p><b>Pattern:</b> <span id="knownPatternSetter">- - - - -</span></p>
      <p><b>Must contain:</b> <span id="mustContainSetter">none</span></p>
    </div>

    <p><b>Current Secret:</b> <span id="secretWordDisplay">NONE</span></p>
    <p><b>Latest Guess:</b> <span id="pendingGuessDisplay">-</span></p>

    <hr>

    <h3>Choose Secret</h3>
    <input id="newSecretInput" maxlength="5" autocomplete="off" class="letter-input">
    <button id="submitSetterNewBtn" class="primary-btn">Submit NEW Secret</button>
    <button id="submitSetterSameBtn" class="primary-btn">Keep SAME Secret</button>
    <button id="setterBackToMenuBtn" class="secondary-btn small">Back</button>

    <h3>Setter Power</h3>
    <button id="btnHideTile" class="power-btn">â“ Hide Tile</button>

    <!-- Wordle keyboard -->
    <div id="keyboardSetter" class="keyboard"></div>

    <!-- history -->
    <h3>History</h3>
    <div id="historySetter" class="history-box">No guesses yet.</div>
  </div>

  <!-- ===================================================== -->
  <!-- GUESSER SCREEN -->
  <!-- ===================================================== -->
  <div id="guesserScreen" class="screen">
    <h2>Guesser <span id="guesserRoleTag" class="badge badge-b">B</span></h2>

    <div class="constraints-box">
      <p><b>Pattern:</b> <span id="knownPatternGuesser">- - - - -</span></p>
      <p><b>Must contain:</b> <span id="mustContainGuesser">none</span></p>
    </div>

    <h3>Make a Guess</h3>
    <input id="guessInput" maxlength="5" autocomplete="off" class="letter-input">
    <button id="submitGuessBtn" class="primary-btn">Submit Guess</button>
    <button id="guesserBackToMenuBtn" class="secondary-btn small">Back</button>

    <h3>Powers</h3>
    <button id="btnRevealGreen" class="power-btn">ğŸŸ© Reveal Green</button>
    <button id="btnFreezeSecret" class="power-btn">ğŸ”’ Freeze Secret</button>

    <div id="keyboardGuesser" class="keyboard"></div>

    <h3>History</h3>
    <div id="historyGuesser" class="history-box">No guesses yet.</div>
  </div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script src="client.js"></script>

<!-- No-script fallback -->
<noscript><p style="color:red;">This game requires JavaScript.</p></noscript>

</body>
</html>
