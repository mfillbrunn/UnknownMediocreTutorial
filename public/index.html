<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>VS Wordle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">

  <style>
    /* Switch button active (user pressed switch) */
    .switch-active {
      background-color: #28a745 !important;
      border-color: #1e7e34 !important;
      color: white !important;
    }
  </style>
</head>

<body>
<script>
  const $ = id => document.getElementById(id);
</script>
<div id="appContainer">

  <h1 class="title">VS Wordle</h1>

  <!-- TURN POPUP -->
  <div id="turnPopup" class="turn-popup"></div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- ===================================================== -->
  <!-- LOBBY -->
  <!-- ===================================================== -->
  <div id="lobby" class="screen active">
    <h2>Online Lobby</h2>

    <button id="createRoomBtn" class="primary-btn">Create Room</button>

    <div class="join-block">
      <input id="joinRoomInput" type="text" maxlength="8" placeholder="Room code">
      <button id="joinRoomBtn" class="primary-btn small">Join</button>
    </div>

    <div id="roomInfo" style="display:none; margin-top:10px;">

      <p><b>Room:</b> <span id="roomCodeLabel" class="room-code"></span></p>
      <div style="margin-top: 10px;">
  <label>
    <b>Powers this match:</b>
    <input id="powerCountInput" type="number" min="1" max="10" value="2" style="width:80px;">
  </label>
  <button id="applyPowerCountBtn" class="primary-btn small">Apply</button>
</div>
      <!-- NEW: SHOW YOUR ROLE HERE -->
      <p><b>You are:</b> <span id="lobbyRoleLabel">-</span></p>

      <!-- Switch Roles Button -->
      <button id="switchRolesBtn" class="primary-btn">Switch Roles</button>

      <!-- READY BUTTON -->
      <button id="readyBtn" class="primary-btn">I'm Ready</button>
    </div>


    <p id="lobbyStatus" class="status"></p>
  </div>

  <!-- ===================================================== -->
  <!-- MENU -->
  <!-- ===================================================== -->
  <div id="menu" class="screen">
    <h2>Game Menu</h2>
    <p><b>Room:</b> <span id="menuRoomCode"></span></p>
    <p><b>You are:</b> <span id="menuPlayerRole"></span></p>
    <div id="roundSummary" class="summary-box"></div>
    <button id="newMatchBtn" class="primary-btn">New Match</button>
  </div>

  <!-- ===================================================== -->
  <!-- SETTER SCREEN -->
  <!-- ===================================================== -->
  <div id="setterScreen" class="screen theme-setter">
    <h2>Setter <span class="badge badge-a">A</span></h2>

    <div class="constraints-box">
      <p><b>Pattern:</b> <span id="knownPatternSetter">- - - - -</span></p>
      <p><b>Must contain:</b> <span id="mustContainSetter">none</span></p>
    </div>
    <p><b>Remaining Secrets:</b> <span id="remainingWordsSetter" class="remainingMeter">-</span></p>
    <p><b>Current Secret:</b> <span id="secretWordDisplay">NONE</span></p>
    <div id="setterSecretArea"></div> <!-- needed for Assassin Word -->
    <p><b>Latest Guess:</b> <span id="pendingGuessDisplay">-</span></p>
    <h3>Preview Feedback</h3>
    <div id="setterPreview" class="preview-box"></div>

    <hr>
    <div id="turnIndicatorSetter" class="turn-indicator"></div>

    <h3>Enter Secret</h3>
   <input id="newSecretInput"
       maxlength="5"
       autocomplete="new-password"
       autocapitalize="none"
       autocorrect="off"
       spellcheck="false"
       class="letter-input">
    <button id="submitSetterNewBtn" class="primary-btn">Submit NEW Secret</button>
    <button id="submitSetterSameBtn" class="primary-btn">Keep SAME Secret</button>
    <div id="assassinModal" class="modal">
  <div class="modal-content">
    <h3>Enter Assassin Word</h3>
    <input id="assassinInput" maxlength="5" autocomplete="off" />
    <button id="assassinSubmitBtn">Set Assassin Word</button>
    <button id="assassinCancelBtn">Cancel</button>
  </div>
</div>

    <h3>Setter Powers</h3>
    <div id="setterPowerContainer"></div>

    <div id="keyboardSetter" class="keyboard"></div>

    <h3>History</h3>
    <div id="historySetter" class="history-box">No guesses yet.</div>
  </div>

  <!-- ===================================================== -->
  <!-- GUESSER SCREEN -->
  <!-- ===================================================== -->
 <div id="guesserScreen" class="screen theme-guesser">

  <h2>Guesser <span class="badge badge-b">B</span></h2>

  <!-- HISTORY / WORDLE BOARD -->
  <div id="boardGuesser" class="board-container">
    <!-- JS will fill 6 rows of 5 tiles -->
  </div>

  <!-- KEYBOARD -->
  <div id="keyboardGuesser" class="keyboard"></div>

  <!-- CONSTRAINTS moved to bottom -->
  <div class="constraints-box constraints-bottom">
    <p><b>Pattern:</b> <span id="knownPatternGuesser">- - - - -</span></p>
    <p><b>Must contain:</b> <span id="mustContainGuesser">none</span></p>
    <p><b>Remaining Words:</b> <span id="remainingWordsGuesser" class="remainingMeter">-</span></p>
  </div>
  <div id="guesserPowerContainer"></div>
  <div id="turnIndicatorGuesser" class="turn-indicator"></div>

</div>

<!-- ===================================================== -->
<!-- ===============  SCRIPT LOAD ORDER (CRITICAL) ======== -->
<!-- ===================================================== -->

<script src="/socket.io/socket.io.js"></script>

<script src="/game-engine/constraints.js"></script>
<script src="/game-engine/scoring.js"></script>
<script src="/game-engine/history.js"></script>
<script src="/game-engine/preview.js"></script>

<script src="network/socketClient.js"></script>

<script src="ui/keyboard.js"></script>
  <script src="ui/board.js"></script>
<script src="ui/history.js"></script>
<!-- Power Engine Core -->
<script src="powerEngine/powerEngine.js"></script>
<script src="powerRules.js"></script>
<!-- Individual power modules -->
<script src="powerEngine/powers/hideTile.js"></script>
<script src="powerEngine/powers/confuseColors.js"></script>
<script src="powerEngine/powers/countOnly.js"></script>
<script src="powerEngine/powers/revealGreen.js"></script>
<script src="powerEngine/powers/freezeSecret.js"></script>
<script src="powerEngine/powers/suggestGuess.js"></script>
<script src="powerEngine/powers/suggestSecret.js"></script>
<script src="powerEngine/powers/forceTimer.js"></script>
<script src="powerEngine/powers/revealHistory.js"></script>
<script src="powerEngine/powers/blindSpot.js"></script>
<script src="powerEngine/powers/stealthGuess.js"></script>
<script src="powerEngine/powers/magicMode.js"></script>
<script src="powerEngine/powers/vowelRefresh.js"></script>
<script src="powerEngine/powers/revealLetter.js"></script>
<script src="powerEngine/powers/assassinWord.js"></script>


<!-- Main client logic (must be last) -->
<script src="client.js"></script>
<noscript>
  <p style="color:red;">This game requires JavaScript to run.</p>
</noscript>

</body>
</html>
